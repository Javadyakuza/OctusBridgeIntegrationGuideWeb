var AlgoliaAnalytics=function(n){"use strict";function e(){"function"!=typeof Object.assign&&(Object.assign=function(n,e){var t=arguments;if(null==n)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(n),r=1;r<arguments.length;r++){var o=t[r];if(null!=o)for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}return i})}function t(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]])}return t}function i(n){return n.reduce(function(n,e){var t=n.events,i=n.additionalParams;return"index"in e?{additionalParams:i,events:t.concat([e])}:{events:t,additionalParams:e}},{events:[],additionalParams:void 0})}var r=function(){try{return Boolean(navigator.cookieEnabled)}catch(n){return!1}},o=function(){try{return Boolean(navigator.sendBeacon)}catch(n){return!1}},s=function(){try{return Boolean(XMLHttpRequest)}catch(n){return!1}},a=function(n){return void 0===n},c=function(n){return"string"==typeof n},u=function(n){return"number"==typeof n},l=function(n){return"function"==typeof n};function h(n){return function(e,i){var r,o=this;if(!this._userHasOptedOut){if(!this._hasCredentials)throw new Error("Before calling any methods on the analytics, you first need to call the 'init' function with appId and apiKey parameters");var s=e.map(function(n){var e,i,r=n.filters,s=t(n,["filters"]),c=Object.assign(Object.assign({},s),{userToken:(i=null===(e=n)||void 0===e?void 0:e.userToken,null!==i&&void 0!==i?i:o._userToken)});return a(r)||(c.filters=r.map(encodeURIComponent)),c});return function(n,e,t,i,r,o,s){void 0===s&&(s={});var a=Object.assign({"X-Algolia-Application-Id":e,"X-Algolia-API-Key":t,"X-Algolia-Agent":encodeURIComponent(i.join("; "))},s),c=Object.keys(a).map(function(n){return n+"="+a[n]}).join("&");return n(r+"/1/events?"+c,{events:o})}(n,this._appId,this._apiKey,this._ua,this._endpointOrigin,s,null===(r=i)||void 0===r?void 0:r.headers)}}}var d="2.3.0",f=["insights-js ("+d+")","insights-js-browser-iife ("+d+")"];e();var p=["de","us"],v=2592e6;function g(n){var e;if(!n)throw new Error("Init function should be called with an object argument containing your apiKey and appId");if(a(n.apiKey)||!c(n.apiKey))throw new Error("apiKey is missing, please provide it so we can authenticate the application");if(a(n.appId)||!c(n.appId))throw new Error("appId is missing, please provide it, so we can properly attribute data to your application");if(!a(n.region)&&-1===p.indexOf(n.region))throw new Error("optional region is incorrect, please provide either one of: "+p.join(", ")+".");if(!(a(n.cookieDuration)||u(n.cookieDuration)&&isFinite(n.cookieDuration)&&Math.floor(n.cookieDuration)===n.cookieDuration))throw new Error("optional cookieDuration is incorrect, expected an integer.");this._apiKey=n.apiKey,this._appId=n.appId,function(n,e,i){var r=e.partial,o=t(e,["partial"]);r||Object.assign(n,i);Object.assign(n,Object.keys(o).reduce(function(n,e){var t;return Object.assign(Object.assign({},n),((t={})["_"+e]=o[e],t))},{}))}(this,n,{_userHasOptedOut:!!n.userHasOptedOut,_region:n.region,_useCookie:(e=n.useCookie,null!==e&&void 0!==e&&e),_cookieDuration:n.cookieDuration||6*v}),this._endpointOrigin=n.region?"https://insights."+n.region+".algolia.io":"https://insights.algolia.io",this._hasCredentials=!0,this._ua=[].concat(f),n.userToken?this.setUserToken(n.userToken):this._userToken||this._userHasOptedOut||!this._useCookie||this.setAnonymousUserToken()}function b(n,e){return e.map(function(e){return Object.assign({eventType:n},e)})}var y,k,O,m,x=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var e=16*Math.random()|0;return("x"===n?e:3&e|8).toString(16)})},w="_ALGOLIA",j=function(n,e,t){var i=new Date;i.setTime(i.getTime()+t);var r="expires="+i.toUTCString();document.cookie=n+"="+e+";"+r+";path=/"},_=function(n){for(var e=n+"=",t=document.cookie.split(";"),i=0;i<t.length;i++){for(var r=t[i];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(e))return r.substring(e.length,r.length)}return""};Object.keys||(Object.keys=(y=Object.prototype.hasOwnProperty,k=!{toString:null}.propertyIsEnumerable("toString"),m=(O=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(n){if("function"!=typeof n&&("object"!=typeof n||null===n))throw new TypeError("Object.keys called on non-object");var e,t,i=[];for(e in n)y.call(n,e)&&i.push(e);if(k)for(t=0;t<m;t++)y.call(n,O[t])&&i.push(O[t]);return i})),e();var T=function(n){var e=n.requestFn;this._ua=[],this.version=d,this._hasCredentials=!1,this.sendEvents=h(e).bind(this),this.init=g.bind(this),this.addAlgoliaAgent=function(n){-1===this._ua.indexOf(n)&&this._ua.push(n)}.bind(this),this.setUserToken=function(n){this._userToken=n,l(this._onUserTokenChangeCallback)&&this._onUserTokenChangeCallback(this._userToken)}.bind(this),this.setAnonymousUserToken=function(){if(r()){var n=_(w);n&&""!==n&&0===n.indexOf("anonymous-")?this.setUserToken(n):(this.setUserToken("anonymous-"+x()),j(w,this._userToken,this._cookieDuration))}}.bind(this),this.getUserToken=function(n,e){return l(e)&&e(null,this._userToken),this._userToken}.bind(this),this.onUserTokenChange=function(n,e){this._onUserTokenChangeCallback=n,e&&e.immediate&&l(this._onUserTokenChangeCallback)&&this._onUserTokenChangeCallback(this._userToken)}.bind(this),this.clickedObjectIDsAfterSearch=function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];var t=i(n),r=t.events,o=t.additionalParams;return this.sendEvents(b("click",r),o)}.bind(this),this.clickedObjectIDs=function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];var t=i(n),r=t.events,o=t.additionalParams;return this.sendEvents(b("click",r),o)}.bind(this),this.clickedFilters=function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];var t=i(n),r=t.events,o=t.additionalParams;return this.sendEvents(b("click",r),o)}.bind(this),this.convertedObjectIDsAfterSearch=function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];var t=i(n),r=t.events,o=t.additionalParams;return this.sendEvents(b("conversion",r),o)}.bind(this),this.convertedObjectIDs=function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];var t=i(n),r=t.events,o=t.additionalParams;return this.sendEvents(b("conversion",r),o)}.bind(this),this.convertedFilters=function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];var t=i(n),r=t.events,o=t.additionalParams;return this.sendEvents(b("conversion",r),o)}.bind(this),this.viewedObjectIDs=function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];var t=i(n),r=t.events,o=t.additionalParams;return this.sendEvents(b("view",r),o)}.bind(this),this.viewedFilters=function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];var t=i(n),r=t.events,o=t.additionalParams;return this.sendEvents(b("view",r),o)}.bind(this),this.getVersion=function(n){l(n)&&n(this.version)}.bind(this)},C=function(n,e){var t=JSON.stringify(e);if(!navigator.sendBeacon(n,t))return E(n,e)},E=function(n,e){var t=JSON.stringify(e),i=new XMLHttpRequest;i.open("POST",n),i.setRequestHeader("Content-Type","application/json"),i.setRequestHeader("Content-Length",""+t.length),i.send(t)};function I(n){var e,t=n.AlgoliaAnalyticsObject;if(t){var i=(e=this,function(n){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];n&&l(e[n])?e[n].apply(e,t):console.warn("The method `"+n+"` doesn't exist.")}),r=n[t];r.queue=r.queue||[];var o=r.queue;o.forEach(function(n){var e=[].slice.call(n),t=e[0],r=e.slice(1);i.apply(void 0,[t].concat(r))}),o.push=function(n){var e=[].slice.call(n),t=e[0],r=e.slice(1);i.apply(void 0,[t].concat(r))}}}function P(n){var e=new T({requestFn:n});return"object"==typeof window&&I.call(e,window),e.version=d,e}var A=P(function(){if(o())return C;if(s())return E;throw new Error("Could not find a supported HTTP request client in this environment.")}());return n.createInsightsClient=P,n.default=A,n}({});
